TODO
----
 * implement REPL in terms of the lib API
   * move to-string facilities from internals to the REPL
   * remove file based operations from the internals to LIB or REPL
 * code review
